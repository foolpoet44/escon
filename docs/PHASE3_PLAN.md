# Phase 3: 시스템 고도화 및 데이터베이스 연동 계획

## 1. 개요
Phase 3는 정적 파일 기반의 현재 시스템을 **데이터베이스 기반의 동적 애플리케이션**으로 전환하는 단계입니다. Supabase(PostgreSQL)를 도입하여 데이터의 영속성을 확보하고, 관리자 기능을 통해 웹에서 직접 데이터를 수정/관리할 수 있는 환경을 구축합니다.

## 2. 목표 시스템 아키텍처

### 2.1 기술 스택
- **Backend/DB**: Supabase (PostgreSQL, Auth, Realtime)
- **Framework**: Next.js 14 (App Router)
- **State Management**: React Query (데이터 페칭 및 캐싱 최적화)
- **UI Components**: 기존 스타일 유지 + Radix UI/Shadcn UI (필요 시 도입)

### 2.2 데이터 구조 (Schema)
1. **Organizations**: 조직 정보
2. **Enablers**: Enabler 정보 (이름, 우선순위, 메타데이터)
3. **Skills**: 스킬 정보 (이름, 중요도, 숙련도, 타입)
4. **Skill_Enabler_Relations**: 스킬과 Enabler 간의 N:M 관계

## 3. 상세 구현 계획

### Week 1: 인프라 구축 및 데이터 마이그레이션
- [ ] **Supabase 프로젝트 설정**: DB 생성 및 환경변수 설정
- [ ] **테이블 스키마 설계**: SQL 작성 및 적용
- [ ] **데이터 마이그레이션 스크립트 작성**: 기존 `skills.json` -> DB 적재
- [ ] **Supabase Client 연동**: `app/lib/supabase.ts` 구현

### Week 2: 데이터 연동 및 조회 API 전환
- [ ] **API Route 재작성**: 파일 읽기 로직 -> DB 쿼리 로직으로 변경 (`app/lib/skills-data.ts` 등 수정)
- [ ] **기존 페이지 연동 확인**: 네트워크 그래프, 스킬 트리, 도메인 비교 페이지 정상 작동 확인
- [ ] **성능 최적화**: 서버 사이드 캐싱 및 인덱싱 적용

### Week 3: 관리자(Admin) 기능 구현
- [ ] **관리자 페이지 생성**: `/admin` 라우트 구축
- [ ] **스킬 CRUD**: 스킬 추가/수정/삭제 UI 구현
- [ ] **Enabler 관리**: Enabler 메타데이터 수정 기능
- [ ] **변경 이력(Log) 기능**: 데이터 수정 내역 기록 (선택 사항)

### Week 4: 인증 및 배포
- [ ] **인증 시스템**: 관리자 로그인 (Supabase Auth)
- [ ] **보안 설정**: Row Level Security (RLS) 정책 적용
- [ ] **프로덕션 배포**: Vercel 연동 및 배포
- [ ] **최종 테스트**: 전체 시스템 통합 테스트

## 4. 우선순위 및 마일스톤

| 주차 | 목표 | 주요 산출물 | 비고 |
|---|---|---|---|
| **W1** | DB 구축 | DB 스키마, 마이그레이션 스크립트 | 데이터 무결성 검증 필수 |
| **W2** | API 전환 | DB 기반 데이터 로딩 모듈 | 기존 UI 영향 최소화 |
| **W3** | Admin 기능 | 관리자 대시보드 | 직관적인 편집 UI |
| **W4** | 배포 | 라이브 서비스 URL | 보안 점검 수행 |

## 5. 예상 리스크 및 대응

- **데이터 구조 변경**: 기존 JSON 구조와 RDB 구조 차이로 인한 로직 수정 소요 -> **Mapper 함수**를 통해 호환성 유지
- **마이그레이션 오류**: 데이터 누락 가능성 -> **검증 스크립트**를 통한 사전/사후 전수 조사

---
**작성일**: 2026-02-08
**작성자**: AI Assistant (Antigravity)
